import"../vendor.js";class t{constructor(t){var{artifact:a,mergeConfig:e,preload:r}=t;this.artifact=a,this.preload=r,this.config=e(a.ply,{fadeSpeed:1,targetName:"target_"}),this.currentPly=!1}afterLoadModel(t){var{engine:a}=t;this.points=a.model.getObjectByName("plyGroup"),this.points.children.forEach((t=>{var e="".concat(this.config.targetName).concat(t.geometry.name),r=a.model.getObjectByName(e);if(r){var{x:i,y:o,z:c}=r.position;t.position.set(i,o,c);var{x:n,y:s,z:p}=r.rotation;t.rotation.set(n,s,p);var{x:l,y:h,z:d}=r.scale;t.scale.set(l,h,d)}t.material.transparent=!0,t.material.opacity=0}))}onTouch(t){t.forEach((t=>{var{node:a}=t,e=a.name.split("_").pop(),r=this.points.children.find((t=>t.geometry.name===e));this.currentPly!==r&&(this.currentPly=r)}))}tick(t){var{delta:a}=t,e=this.config.fadeSpeed*a;this.points.children.forEach((t=>{var{material:a}=t;this.currentPly!==t?a.opacity>0&&(a.opacity-=1.3*e):a.opacity<1&&(a.opacity+=.8*e)}))}}export{t as default};
